{% extends "base.html" %}

{% load staticfiles %}

{% block js %}

{% endblock %}

{% block css %}
<link rel="stylesheet" type="text/css" 
				href="{% static "css/component.css" %}"/>
{% endblock %}

{% block content %}
	
<div id="component_head">

	<div id="component_img">
		<img src="/{{ component.img }}"/>
	</div>

	<div id="component_ref">
		<p>
			Ref: {{ component.ref }} 
			<br/>
			Name: {{ component.name }}
			<br/>
			{% if is_creator %}
			<a href="{{ modify_url }}"><img class="modify_icon" src="{% static "icons/edit.png" %}" alt="Edit component"/></a>
			<a href="{{ delete_url }}"><img class="modify_icon" src="{% static "icons/delete.png" %}" alt="Delete component"/></a>
			{% endif %}
		</p>
		
	</div>

</div>

<div id="component_desc">
	<ul>
		<li><span>Category: <a href="{{ component.category.link }}">{{ component.category.name }}</a></span></li>
		<li><span>Manufacturer: <a href="{{ component.manufacturer.link }}">{{ component.manufacturer.name }}</a></span></li>
		<li><span>Average Price: {{ component.avgprice }} â‚¬</span></li>
		<li><span>Supported By:</span></li>
			<ul>
				{% for sb in component.supportedby %}
				<li><span>
						  <a href="{{ sb.link }}">{{ sb.name }}</a>
						  </br>
						  From version: {{ sb.minversion }} 
						  to: {{ sb.maxversion }}
				</span></li>
				{% endfor %}
			</ul>

		<li><span>Description:</span></li>
			<ul>
				{{ component.desc }}
			</ul>
	</ul>
</div>

<div id="component_reviews">

	<!-- reviews -->
	{% for review in component.reviews %}
		{% if forloop.counter|divisibleby:"2" %}
	<div id="component_review_even">
		{% else %}
	<div id="component_review_odd">
		{% endif %}
		<p id="review_user">{{ review.user }}</p>
		<p>Rating: {{ review.rating }}</p>
		<p>{{ review.comment }}</p>
	</div>
	{% endfor %}


	<!-- Reviews form -->
	{% if user.username %}
	<form action="{{ create_review_url }}" method="post">
		{% csrf_token %}
		<p>Rating:</p>
		<div id="component_rating">
			{% for rate in RATING_CHOICES %}

				{% if forloop.counter == 3 %}
			<input type="radio" name="rating" id="rating{{ forloop.counter }}" value="{{ rate.0 }}" checked="checked"/>
				{% else %}
			<input type="radio" name="rating" id="rating{{ forloop.counter }}" value="{{ rate.0 }}"/>
				{% endif %}

			<label for="choice{{ forloop.counter }}">{{ rate.1 }} star{{ rate.0|pluralize }}</label>
			{% endfor %}
		</div>		
		<p>Comment:</p>
		<textarea name="comment" id="comment" rows="5"></textarea>
		<input type="submit" value="Send Review"/>
	</form>
	{% endif %}
</div>

{% endblock %}